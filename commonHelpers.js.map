{"version":3,"file":"commonHelpers.js","sources":["../src/img/icons.svg","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__f9984085__\"","\nconst API_URL = 'https://pixabay.com/api/';\nconst API_KEY = '';\n\nconst fetchData = url =>\n    new Promise((resolve, reject) =>\n      fetch(url)\n        .then(response => {\n          if (!response.ok) {\n            reject(new Error(`HTTP error, status: ${response.status}`));\n          }\n          return response.json();\n        })\n        .then(json => resolve(json))\n        .catch(error => reject(error))\n    );\n    \n    function getImages(strForSearch) {\n      const apiParams = {\n        key: API_KEY,\n        q: encodeURIComponent(strForSearch),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: 1,\n        per_page: 20,\n      };\n    \n      const url = `${API_URL}?${new URLSearchParams(apiParams).toString()}`;\n      return new Promise((resolve, reject) => {\n        fetchData(url)\n          .then(data => {\n            if (!data.hits.length) {\n              reject(\n                'Sorry, there are no images matching your search query. Please, try again!'\n              );\n            }\n            resolve(data.hits);\n          })\n          .catch(error => {\n            reject(`Error fetching images: ${error.message}`);\n          });\n      });\n    }\n    \n    export default getImages;\n","const BGR_GALLERY = '#ffffff';\nconst BGR_BODY = '#f5f5f5';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport '../src/css/layout/simple-lightbox-window.css';\nimport iconsUrl from '../src/img/icons.svg';\n\nimport getImages from './js/pixabay-api.js';\n\nconst galleryRef = document.querySelector('.gallery');\nconst loaderRef = document.querySelector('.loader');\nconst searchForm = document.querySelector('.search-form');\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\nlet slBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  nav: true,\n  navText: [\n    `<svg class=\"lightbox-button-icon-prev\" width=\"24\" height=\"24\" aria-label=\"icon arrow left\">\n          <use href=\"${iconsUrl}#icon-chevron-left\"></use>\n        </svg>`,\n    `<svg class=\"lightbox-button-icon-next\" width=\"24\" height=\"24\" aria-label=\"icon arrow right\">\n          <use href=\"${iconsUrl}#icon-chevron-right\"></use>\n        </svg>`,\n  ],\n  close: true,\n  closeText: `\n        <svg class=\"lightbox-close-icon\" width=\"16\" height=\"16\">\n          <use href=\"${iconsUrl}#close-form\"></use>\n        </svg>`,\n  enableKeyboard: true,\n  showCounter: true,\n  animationSlide: true,\n  loop: true,\n});\n\nfunction onSearchFormSubmit(event) {\n  event.preventDefault();\n  loaderRef.style.display = 'block';\n  const searchStr = event.currentTarget.search.value.trim();\n  getImages(searchStr)\n    .then(data => refreshOnSuccess(data))\n    .catch(msg => refreshOnError(msg));\n}\n\nfunction refreshOnError(msg) {\n  searchForm.search.value = '';\n  loaderRef.style.display = 'none';\n  createErrMsg(msg);\n  galleryRef.style.backgroundColor = BGR_BODY;\n  galleryRef.innerHTML = '';\n  slBox.refresh();\n}\n\nfunction refreshOnSuccess(data) {\n  searchForm.search.value = '';\n  loaderRef.style.display = 'none';\n  galleryRef.style.backgroundColor = BGR_GALLERY;\n  createCardsGallery(data, galleryRef);\n  slBox.refresh();\n}\n\nfunction createErrMsg(msg) {\n    iziToast.show({\n      message: msg,\n      messageColor: '#fafafb',\n      messageSize: '16px',\n      backgroundColor: '#fc5a5a',\n      position: 'topRight',\n      closeOnEscape: true,\n      close: true,\n      icon: 'Icomoon',\n      iconUrl: `${iconXUrl}`,\n      iconColor: '#fafafb',\n    });\n  }\n  \n  function createOkMsg(msg) {\n    iziToast.show({\n      message: msg,\n      messageColor: '#fafafb',\n      messageSize: '16px',\n      backgroundColor: '#82C43C',\n      position: 'topRight',\n      closeOnEscape: true,\n      close: true,\n      icon: 'Icomoon',\n      iconUrl: `${iconOkUrl}`,\n      iconColor: '#fafafb',\n    });\n  }\n  "],"names":["iconsUrl","API_URL","API_KEY","fetchData","url","resolve","reject","response","json","error","getImages","strForSearch","apiParams","data","BGR_GALLERY","BGR_BODY","galleryRef","loaderRef","searchForm","onSearchFormSubmit","slBox","SimpleLightbox","event","searchStr","refreshOnSuccess","msg","refreshOnError","createErrMsg"],"mappings":"svBAAA,MAAeA,EAAA,2CCCTC,EAAU,2BACVC,EAAU,GAEVC,EAAYC,GACd,IAAI,QAAQ,CAACC,EAASC,IACpB,MAAMF,CAAG,EACN,KAAKG,IACCA,EAAS,IACZD,EAAO,IAAI,MAAM,uBAAuBC,EAAS,MAAM,EAAE,CAAC,EAErDA,EAAS,OACjB,EACA,KAAKC,GAAQH,EAAQG,CAAI,CAAC,EAC1B,MAAMC,GAASH,EAAOG,CAAK,CAAC,CACrC,EAEI,SAASC,EAAUC,EAAc,CAC/B,MAAMC,EAAY,CAChB,IAAKV,EACL,EAAG,mBAAmBS,CAAY,EAClC,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,EACN,SAAU,EAClB,EAEYP,EAAM,GAAGH,CAAO,IAAI,IAAI,gBAAgBW,CAAS,EAAE,SAAU,CAAA,GACnE,OAAO,IAAI,QAAQ,CAACP,EAASC,IAAW,CACtCH,EAAUC,CAAG,EACV,KAAKS,GAAQ,CACPA,EAAK,KAAK,QACbP,EACE,2EAChB,EAEYD,EAAQQ,EAAK,IAAI,CAC7B,CAAW,EACA,MAAMJ,GAAS,CACdH,EAAO,0BAA0BG,EAAM,OAAO,EAAE,CAC5D,CAAW,CACX,CAAO,CACP,CC3CA,MAAMK,EAAc,UACdC,EAAW,UAUXC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAY,SAAS,cAAc,SAAS,EAC5CC,EAAa,SAAS,cAAc,cAAc,EAExDA,EAAW,iBAAiB,SAAUC,CAAkB,EAExD,IAAIC,EAAQ,IAAIC,EAAe,aAAc,CAC3C,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,IAAK,GACL,QAAS,CACP;AAAA,uBACmBrB,CAAQ;AAAA,gBAE3B;AAAA,uBACmBA,CAAQ;AAAA,eAE5B,EACD,MAAO,GACP,UAAW;AAAA;AAAA,uBAEUA,CAAQ;AAAA,gBAE7B,eAAgB,GAChB,YAAa,GACb,eAAgB,GAChB,KAAM,EACR,CAAC,EAED,SAASmB,EAAmBG,EAAO,CACjCA,EAAM,eAAc,EACpBL,EAAU,MAAM,QAAU,QAC1B,MAAMM,EAAYD,EAAM,cAAc,OAAO,MAAM,OACnDZ,EAAUa,CAAS,EAChB,KAAKV,GAAQW,EAAiBX,CAAI,CAAC,EACnC,MAAMY,GAAOC,EAAeD,CAAG,CAAC,CACrC,CAEA,SAASC,EAAeD,EAAK,CAC3BP,EAAW,OAAO,MAAQ,GAC1BD,EAAU,MAAM,QAAU,OAC1BU,EAAaF,CAAG,EAChBT,EAAW,MAAM,gBAAkBD,EACnCC,EAAW,UAAY,GACvBI,EAAM,QAAO,CACf,CAEA,SAASI,EAAiBX,EAAM,CAC9BK,EAAW,OAAO,MAAQ,GAC1BD,EAAU,MAAM,QAAU,OAC1BD,EAAW,MAAM,gBAAkBF,EACnC,mBAAmBD,EAAMG,CAAU,EACnCI,EAAM,QAAO,CACf,CAEA,SAASO,EAAaF,EAAK,CACvB,SAAS,KAAK,CACZ,QAASA,EACT,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,SAAU,WACV,cAAe,GACf,MAAO,GACP,KAAM,UACN,QAAS,GAAG,QAAQ,GACpB,UAAW,SACjB,CAAK,CACL"}